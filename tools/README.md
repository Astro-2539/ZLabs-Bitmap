# Tools

本文件夹存储了字体构建相关脚本。

其中`build.py`为主构建程序；`kbitx_marge_selected.py`用于生成变体字形的常规版本；`kbitx_marge_fallback.py`用于生成变体字形的 Fallback 版本。

## 字体构建逻辑

字体的陆标变体工程文件包含了整套字体所需的所有字符（字母、汉字、符号等），因此将直接构建生成通用字体格式。

字体的港标、日标工程文件仅存储了差异字形，因此需要先进行字符补全，然后才能生成通用字体。

字形补全由`kbitx_marge_selected.py`及`kbitx_marge_fallback.py`脚本实现。字形的补全是指在保留工程文件所存储差异字形的基础上，将陆标文件中的字形追加到对应变体中，因此工程文件中存储的字形优先级更高。

对于西文及符号部分，将直接从陆标复制对应的字形（部分中文标点符号除外）。

对于中文部分：

- `kbitx_marge_selected.py` 会依据 `flags_HC.txt` / `flags_JP.txt` ，仅处于该列表中的字形可以被复制到对应字形变体中。

- `kbitx_marge_fallback.py` 会将陆标中所有港标/日标工程文件未定义的汉字字符复制到对应字形变体中。

补全字形后将开始生成通用字体文件，详见`build.py`文件。
